@insert lvMacros.asco
@insert lvSpat.asco

antescofo::analysis 4096 512
antescofo::suivi 1
antescofo::pedal 0

BPM 60 ; 1 beat = 1 second

$playing := 0

@start ; reset initial params
demoms 0
loadfile takes/p1-m30-37.wav
mubuffer readall capture_init.mubu

input-sel 1 ; vn1
input-gain 1

;=====================================
;getfreq 1
;@doubler(vn1 1 vn2 1)
;::spat_goto(3, 55, 2, 1)
;EVENT 10 next
;@doubler(vn2 1 va 1)
;::spat_goto(3, -55, 1, 1)

EVENT 10 m30	
	loadfile takes/p1-m30-37.wav
	spat source 1 aed 55 0 2
	spat source 3 aed 55 0 2
	::spat_goto(1, 55, 2, 10)
	::spat_goto(3, 55, 2, 10)
	getfreq 1
	@doubler(va 2 vc 2.5, 0.15)
	@resoGrill(vn1 1 vn2 1)
	gmirror feedbk 0.1 
EVENT 5 m32
	input-sel 2
	@doubler(va 2 vn2 2, 5)
	::spat_goto(1, 35, 1.5, 2)
	::spat_goto(3, 35, 1.5, 2)
	1 @resoGrill(vn2 1 vc 1)
	1 ::spat_goto(3, 145, 1.5, 2)
	::spat_goto(1, 145, 1.5, 2)

; TODO : fx-input fade out to zero slower

; todo dynamics m10-13 fade out, for CONTRAST w/ m14
; todo same for p2-A into B

; todo MERGE 3 parts into one score file, test for leaking processes!